  sensor:
    - name: "House Status"
      state: >
        {% set zone_occupied = int(states('zone.home')) > 0 %}
        {% set guests = is_state('input_boolean.guest_mode', 'on') %}
        {% set presence = is_state('binary_sensor.occupancy_livingroom', 'on') or is_state('binary_sensor.occupancy_frontroom', 'on') or is_state('binary_sensor.occupancy_study', 'on') or is_state('binary_sensor.occupancy_master', 'on') or is_state('binary_sensor.occupancy_sofia', 'on') or is_state('binary_sensor.occupancy_joseph', 'on') or is_state('binary_sensor.occupancy_theo', 'on') %}
        {% if zone_occupied or guests or presence %}
          Occupied
        {% else %}
          Vacant
        {% endif %}
      icon: >
        {% if is_state('sensor.house_status', 'Occupied') %}
          mdi:home-import-outline
        {% else %}
          mdi:home-export-outline
        {% endif %}

    - name: "Garage No Motion"
      state: '{{ ((as_timestamp(now()) - as_timestamp(states.binary_sensor.motion_garage.last_updated)) / 60) | int}}'
    - name: 'Calendar Location'
      state: >
        {% if states.calendar.family_family.attributes.location is defined %}
          {{ state.calendar.family_family.attributes.location }}
        {% else %}
          zone.sew
        {% endif %}
    - name: 'Power Heater Joseph'
      state: >
        {% if states.switch.heater_joseph.state == 'on' %}
          1200
        {% else %}
          0
        {% endif %}
    - name: Energy Cost Savings
      state: >
        {{ "$%.2f" | format((float(states("sensor.timeoff_livingroom")) * 8.7 / 1000 * 0.28 + float(states("sensor.timeoff_frontroom")) * 4.1 / 1000 * 0.28 + float(states("sensor.timeoff_zoeydesk")) * 7.0 / 1000 * 0.28))}}
